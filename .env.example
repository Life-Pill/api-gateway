# API Gateway Environment Variables
# Copy this file to .env and fill in your values

# Server Configuration
API_GATEWAY_PORT=9191

# API Versioning
API_VERSION=v1

# Eureka Configuration
EUREKA_URI=http://localhost:8761/eureka/
EUREKA_DASHBOARD_URI=http://localhost:8761
EUREKA_REGISTER=true
EUREKA_FETCH_REGISTRY=true
EUREKA_FETCH_INTERVAL=30
EUREKA_PREFER_IP=true
EUREKA_LEASE_RENEWAL=30
EUREKA_LEASE_EXPIRATION=90

# Config Server Configuration (optional)
CONFIG_SERVER_ENABLED=false
CONFIG_SERVER_URI=http://localhost:8888
CONFIG_SERVER_USERNAME=configuser
CONFIG_SERVER_PASSWORD=configsecret

# Redis Configuration (for rate limiting)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_TIMEOUT=2000ms

# Gateway Services Configuration
GATEWAY_USER_AUTH_SERVICE=MOBILE-USER-AUTH-SERVICE
GATEWAY_CONFIG_SERVER=CONFIG-SERVER

# Gateway Routes Configuration
GATEWAY_AUTH_PATH=/api/v1/auth/**
GATEWAY_USER_PATH=/api/v1/user/**
GATEWAY_ROUTES_RETRY_COUNT=3
GATEWAY_RETRY_ATTEMPTS=3
GATEWAY_RETRY_FIRST_BACKOFF=50ms
GATEWAY_RETRY_MAX_BACKOFF=500ms
GATEWAY_HEADER_SOURCE=lifepill-gateway

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8081
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type,Accept,Origin,X-Requested-With,X-XSRF-TOKEN,X-Gateway-Source
CORS_EXPOSED_HEADERS=Authorization,X-Response-Time,X-Request-Id
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# Circuit Breaker - Default Configuration
CB_DEFAULT_SLIDING_WINDOW_SIZE=10
CB_DEFAULT_FAILURE_RATE_THRESHOLD=50
CB_DEFAULT_WAIT_DURATION_OPEN_STATE=10
CB_DEFAULT_PERMITTED_CALLS_HALF_OPEN=5
CB_DEFAULT_SLOW_CALL_RATE_THRESHOLD=50
CB_DEFAULT_SLOW_CALL_DURATION_THRESHOLD=2
CB_DEFAULT_TIMEOUT_DURATION=5

# Circuit Breaker - Auth Service Configuration
CB_AUTH_SLIDING_WINDOW_SIZE=5
CB_AUTH_FAILURE_RATE_THRESHOLD=40
CB_AUTH_WAIT_DURATION_OPEN_STATE=15
CB_AUTH_PERMITTED_CALLS_HALF_OPEN=3
CB_AUTH_SLOW_CALL_RATE_THRESHOLD=40
CB_AUTH_SLOW_CALL_DURATION_THRESHOLD=3
CB_AUTH_TIMEOUT_DURATION=10

# Resilience4j (YAML config)
CB_SLIDING_WINDOW_SIZE=10
CB_FAILURE_RATE_THRESHOLD=50
CB_WAIT_DURATION=10s
CB_HALF_OPEN_CALLS=5
CB_AUTH_FAILURE_RATE=40
CB_AUTH_WAIT_DURATION=15s
TL_TIMEOUT=5s
TL_AUTH_TIMEOUT=10s

# Actuator Configuration
ACTUATOR_ENDPOINTS=health,info,metrics,prometheus,gateway,circuitbreakers,circuitbreakerevents
ACTUATOR_HEALTH_DETAILS=when_authorized
ACTUATOR_HEALTH_COMPONENTS=when_authorized

# Application Info
INFO_APP_NAME=LifePill API Gateway
INFO_APP_DESC=Production-grade API Gateway for LifePill Microservices
INFO_APP_VERSION=v1.0.0

# Logging Configuration
LOG_PATH=./logs
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=DEBUG
LOG_LEVEL_GATEWAY=INFO
LOG_LEVEL_RESILIENCE=DEBUG
LOG_LEVEL_NETTY=INFO

# Environment
ENVIRONMENT=development
ZONE=primary
HOSTNAME=localhost
